<div class="product-details-page">
  <div class="container">
    <div class="breadcrumb-nav">
      <a routerLink="/home">Home</a>
      <span> > </span>
      <a routerLink="/products">Shop</a>
      <span> > </span>
      <a
        routerLink="/products"
        [queryParams]="{ category: product?.category }"
        >{{ product?.category }}</a
      >
      <span> > </span>
      <span class="current">{{ product?.name }}</span>
    </div>

    <div class="product-wrapper neumorph-card">
      <div class="product-gallery">
        <div class="main-image-container">
          <img
            [src]="selectedImage || '/api/placeholder/600/450'"
            [alt]="product?.name"
            class="main-image"
          />
          <div class="image-badges" *ngIf="product?.badge">
            <span class="badge" [ngClass]="product?.badgeType">{{
              product?.badge
            }}</span>
          </div>
        </div>

        <div class="thumbnail-gallery">
          <div
            class="thumbnail"
            *ngFor="let image of product?.images; let i = index"
            [class.active]="selectedImage === image"
            (click)="selectImage(image)"
          >
            <img
              [src]="image || '/api/placeholder/100/100'"
              [alt]="product?.name + ' view ' + (i + 1)"
            />
          </div>
        </div>
      </div>

      <div class="product-info">
        <h1 class="product-title">{{ product?.name }}</h1>

        <div class="product-meta">
          <div class="product-rating">
            <div class="stars">
              <ng-container *ngFor="let i of [1, 2, 3, 4, 5]">
                <span *ngIf="product && i <= product.rating">‚òÖ</span>
                <span *ngIf="product && i > product.rating && i - 1 < product.rating">‚òÖ</span>
                <span *ngIf="product && i > product.rating && i - 1 >= product.rating">‚òÜ</span>
              </ng-container>
            </div>
            <a href="#reviews" class="review-count"
              >{{ product?.reviewCount }} Reviews</a
            >
          </div>

          <div
            class="product-availability"
            [ngClass]="{
              'in-stock': product?.inStock,
              'out-of-stock': !product?.inStock
            }"
          >
            <span *ngIf="product?.inStock">‚úì</span>
            <span *ngIf="!product?.inStock">‚úó</span>
            <span>{{ product?.inStock ? "In Stock" : "Out of Stock" }}</span>
          </div>
        </div>

        <div class="product-price">
          <span class="current-price">${{ product?.price?.toFixed(2) }}</span>
          <span class="old-price" *ngIf="product?.oldPrice"
            >${{ product?.oldPrice?.toFixed(2) }}</span
          >
          <span class="discount-tag" *ngIf="product?.discount"
            >{{ product?.discount }}% OFF</span
          >
        </div>

        <div class="product-description">
          <p>{{ product?.shortDescription }}</p>
        </div>

        <div class="product-options">
          <!-- Use a safe check that Angular's type checker can understand -->
          <div
            class="option-group"
            *ngIf="product && product.colors && product.colors.length > 0"
          >
            <h3 class="option-title">Color</h3>
            <div class="color-options">
              <div
                *ngFor="let color of product.colors"
                class="color-option"
                [style.background-color]="color.code"
                [class.selected]="selectedColor === color.name"
                [attr.title]="color.name"
                (click)="selectColor(color.name)"
              >
                <span *ngIf="selectedColor === color.name">‚úì</span>
              </div>
            </div>
          </div>

          <!-- Use a safe check that Angular's type checker can understand -->
          <div
            class="option-group"
            *ngIf="product && product.materials && product.materials.length > 0"
          >
            <h3 class="option-title">Material</h3>
            <div class="material-options">
              <button
                *ngFor="let material of product.materials"
                [class.selected]="selectedMaterial === material"
                (click)="selectedMaterial = material"
              >
                {{ material }}
              </button>
            </div>
          </div>

          <div class="option-group">
            <h3 class="option-title">Quantity</h3>
            <div class="quantity-selector">
              <button
                (click)="decreaseQuantity()"
                [disabled]="quantity <= 1"
              >
                -
              </button>
              <input type="number" [(ngModel)]="quantity" min="1" max="10" />
              <button
                (click)="increaseQuantity()"
                [disabled]="quantity >= 10"
              >
                +
              </button>
            </div>
          </div>
        </div>

        <div class="product-actions">
          <button
            class="neumorph-button add-to-cart-btn"
            [disabled]="!product?.inStock"
            (click)="addToCart()"
          >
            üõí Add to Cart
          </button>
          <button
            class="neumorph-button wishlist-btn"
            (click)="addToWishlist()"
          >
            ‚ô• Add to Wishlist
          </button>
        </div>

        <div class="product-features">
          <div class="feature">
            <span>üöö</span>
            <div class="feature-text">
              <h4>Free Shipping</h4>
              <p>On orders over $999</p>
            </div>
          </div>
          <div class="feature">
            <span>‚è±Ô∏è</span>
            <div class="feature-text">
              <h4>Easy Returns</h4>
              <p>30-day return policy</p>
            </div>
          </div>
          <div class="feature">
            <span>‚úì</span>
            <div class="feature-text">
              <h4>Warranty</h4>
              <p>3-year warranty</p>
            </div>
          </div>
        </div>

        <div class="social-share">
          <span>Share:</span>
          <div class="share-buttons">
            <a href="#" class="share-button" title="Share on Facebook">
              F
            </a>
            <a href="#" class="share-button" title="Share on Twitter">
              T
            </a>
            <a href="#" class="share-button" title="Share on Pinterest">
              P
            </a>
            <a href="#" class="share-button" title="Share by Email">
              ‚úâ
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="product-details-tabs">
      <div class="tabs-header">
        <button class="tab-button active">Description</button>
        <button class="tab-button">Specifications</button>
        <button class="tab-button" id="reviews">Reviews</button>
      </div>
      
      <div class="tab-content">
        <div class="product-full-description">
          <div [innerHTML]="product?.description"></div>
        </div>
      </div>
    </div>

    <div class="related-products">
      <h2 class="section-title">You May Also Like</h2>
      <div class="products-grid">
        <!-- Product cards for related products -->
        <div
          *ngFor="let relatedProduct of relatedProducts"
          class="product-card-wrapper"
        >
          <!-- Product card component would be here -->
        </div>
      </div>
    </div>
  </div>
</div>
