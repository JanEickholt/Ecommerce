<div class="wishlist-page">
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">My Wishlist</h1>
      <div class="breadcrumb-nav">
        <a routerLink="/home">Home</a>
        <mat-icon>chevron_right</mat-icon>
        <span class="current">Wishlist</span>
      </div>
    </div>

    <div *ngIf="isLoading" class="loading-container">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Loading wishlist...</p>
    </div>

    <div
      *ngIf="!isLoading && wishlistItems.length === 0"
      class="empty-wishlist"
    >
      <div class="empty-wishlist-content neumorph-card">
        <div class="empty-wishlist-icon">
          <mat-icon>favorite_border</mat-icon>
        </div>
        <h2>Your wishlist is empty</h2>
        <p>Items added to your wishlist will be saved here</p>
        <a routerLink="/products" class="neumorph-button primary"
          >Start Shopping</a
        >
      </div>
    </div>

    <div
      *ngIf="!isLoading && wishlistItems.length > 0"
      class="wishlist-content"
    >
      <div class="wishlist-header">
        <h3>Saved Items ({{ wishlistItems.length }})</h3>
        <button mat-button class="clear-wishlist-btn" (click)="clearWishlist()">
          <mat-icon>delete</mat-icon>
          Clear All
        </button>
      </div>

      <div class="wishlist-grid">
        <div
          *ngFor="let item of wishlistItems"
          class="wishlist-item neumorph-card"
        >
          <div class="item-image">
            <img
              [src]="item.imageUrl || '/api/placeholder/300/300'"
              [alt]="item.name"
            />
            <div
              *ngIf="item.badge"
              class="item-badge"
              [ngClass]="item.badgeType"
            >
              {{ item.badge }}
            </div>
          </div>

          <div class="item-content">
            <h3 class="item-title">
              <a [routerLink]="['/product', item.id]">{{ item.name }}</a>
            </h3>

            <div class="item-rating">
              <div class="stars">
                <ng-container *ngFor="let i of [1, 2, 3, 4, 5]">
                  <mat-icon *ngIf="i <= item.rating">star</mat-icon>
                  <mat-icon *ngIf="i > item.rating && i - 1 < item.rating"
                    >star_half</mat-icon
                  >
                  <mat-icon *ngIf="i > item.rating && i - 1 >= item.rating"
                    >star_outline</mat-icon
                  >
                </ng-container>
              </div>
              <span class="rating-count" *ngIf="item.reviewCount"
                >({{ item.reviewCount }})</span
              >
            </div>

            <p class="item-price">
              <span class="old-price" *ngIf="item.oldPrice"
                >${{ item.oldPrice.toFixed(2) }}</span
              >
              ${{ item.price.toFixed(2) }}
            </p>

            <p
              class="availability"
              [ngClass]="{
                'in-stock': item.inStock,
                'out-of-stock': !item.inStock,
              }"
            >
              <mat-icon *ngIf="item.inStock">check_circle</mat-icon>
              <mat-icon *ngIf="!item.inStock">cancel</mat-icon>
              {{ item.inStock ? "In Stock" : "Out of Stock" }}
            </p>

            <div class="item-actions">
              <button
                mat-raised-button
                color="primary"
                class="neumorph-button add-to-cart-btn"
                [disabled]="!item.inStock"
                (click)="addToCart(item)"
              >
                <mat-icon>shopping_cart</mat-icon>
                Add to Cart
              </button>
              <button
                mat-icon-button
                matTooltip="Remove"
                (click)="removeFromWishlist(item.id)"
                class="remove-btn"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
