<div class="filters-container">
  <!-- Categories Section -->
  <div class="filter-section" *ngIf="filterOptions.categories.length > 0">
    <h3 class="section-title">Categories</h3>
    <div class="category-filters">
      <div
        *ngFor="let category of filterOptions.categories"
        class="filter-item"
      >
        <mat-checkbox
          [checked]="selectedCategories.includes(category.value)"
          (change)="toggleCategory(category.value, $event)"
          class="neumorph-checkbox"
        >
          {{ category.label }}
          <span class="item-count">({{ category.count }})</span>
        </mat-checkbox>
      </div>
    </div>
  </div>

  <!-- Price Range Section -->
  <div class="filter-section">
    <h3 class="section-title">Price Range</h3>
    <div class="price-filter">
      <mat-slider
        [min]="filterOptions.priceRange.min"
        [max]="filterOptions.priceRange.max"
        [step]="10"
        [discrete]="true"
        class="neumorph-slider"
        (change)="updatePriceRange($event)"
      >
        <input matSliderStartThumb [(ngModel)]="selectedPriceRange.min" />
        <input matSliderEndThumb [(ngModel)]="selectedPriceRange.max" />
      </mat-slider>

      <div class="price-display">
        <span class="price-value">${{ selectedPriceRange.min }}</span>
        <span class="price-separator">-</span>
        <span class="price-value">${{ selectedPriceRange.max }}</span>
      </div>
    </div>
  </div>

  <!-- Colors Section -->
  <div class="filter-section" *ngIf="filterOptions.colors.length > 0">
    <h3 class="section-title">Colors</h3>
    <div class="color-filters">
      <div
        *ngFor="let color of filterOptions.colors"
        class="color-option"
        [class.selected]="isColorSelected(color.value)"
        [style.background-color]="color.code"
        (click)="toggleColor(color.value)"
        [attr.title]="color.name"
      >
        <mat-icon *ngIf="isColorSelected(color.value)">check</mat-icon>
      </div>
    </div>
  </div>

  <!-- Materials Section -->
  <div class="filter-section" *ngIf="filterOptions.materials.length > 0">
    <h3 class="section-title">Materials</h3>
    <div class="material-filters">
      <div *ngFor="let material of filterOptions.materials" class="filter-item">
        <mat-checkbox
          [checked]="selectedMaterials.includes(material.value)"
          (change)="toggleMaterial(material.value, $event)"
          class="neumorph-checkbox"
        >
          {{ material.label }}
          <span class="item-count">({{ material.count }})</span>
        </mat-checkbox>
      </div>
    </div>
  </div>

  <!-- Rating Section -->
  <div class="filter-section" *ngIf="filterOptions.ratings.length > 0">
    <h3 class="section-title">Ratings</h3>
    <div class="rating-filters">
      <div
        *ngFor="let rating of filterOptions.ratings"
        class="rating-option"
        [class.selected]="selectedRating === rating.value"
        (click)="setRating(rating.value)"
      >
        <div class="stars">
          <mat-icon *ngFor="let i of [1, 2, 3, 4, 5]">
            {{ i <= rating.value ? "star" : "star_border" }}
          </mat-icon>
        </div>
        <span class="rating-text">& up ({{ rating.count }})</span>
      </div>
    </div>
  </div>

  <!-- Features Section -->
  <div class="filter-section" *ngIf="filterOptions.features.length > 0">
    <h3 class="section-title">Features</h3>
    <div class="feature-filters">
      <div *ngFor="let feature of filterOptions.features" class="filter-item">
        <mat-checkbox
          [checked]="selectedFeatures.includes(feature.value)"
          (change)="toggleFeature(feature.value, $event)"
          class="neumorph-checkbox"
        >
          {{ feature.label }}
          <span class="item-count">({{ feature.count }})</span>
        </mat-checkbox>
      </div>
    </div>
  </div>
</div>
